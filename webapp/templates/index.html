<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>Al-Azhar &amp; Dirassa WebApp</title>
    <link rel="preconnect" href="https://telegram.org" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="stylesheet" href="{{ request.app.url_path_for('webapp_static', path='css/main.css') }}?v={{ version }}">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body data-mode="{{ mode }}">
    <div id="app" class="app-shell">
        <header class="app-header">
            <div class="app-title-row">
                <div>
                    <h1 class="app-title">Al-Azhar &amp; Dirassa</h1>
                    <p class="app-subtitle">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Telegram</p>
                </div>
                <div class="app-header-meta" aria-live="polite">
                    <span id="modeBadge" class="mode-badge">{{ '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–∂–∏–º' if mode == 'user' else '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä' }}</span>
                    <span class="version-chip" id="versionChip">v{{ version }}</span>
                </div>
            </div>
        </header>

        <nav class="floating-category-bar" aria-label="–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (–º–æ–±–∏–ª—å–Ω—ã–π —Ä–µ–∂–∏–º)">
            <div id="floatingCategoryList" class="floating-category-bar-inner"></div>
        </nav>

        <div class="layout">
            <aside class="category-sidebar" aria-label="–ö–∞—Ç–µ–≥–æ—Ä–∏–∏">
                <div>
                    <p class="sidebar-title">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</p>
                    <nav id="categoryList" class="category-list" aria-label="–°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π"></nav>
                </div>
            </aside>

            <main class="content-area">
                <nav id="breadcrumbs" class="breadcrumbs" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º"></nav>

                <section id="categoryHero" class="category-hero hidden" aria-hidden="true"></section>

                <section class="content-header" aria-live="polite">
                    <h2 id="categoryTitle" class="category-heading">–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π...</h2>
                    <p id="categoryDescription" class="category-intro"></p>
                    <span id="categoryMeta" class="category-meta"></span>
                </section>

                <section id="loadingState" class="loading" role="status" aria-live="assertive" hidden>
                    <div class="spinner" aria-hidden="true"></div>
                    <p class="loading-text">–ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç...</p>
                </section>

                <section id="errorState" class="error hidden" role="alert" aria-live="assertive">
                    <p class="error-title">‚ö†Ô∏è –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</p>
                    <p id="errorMessage" class="error-message">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.</p>
                    <button id="retryButton" class="retry-button" type="button">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
                </section>

                <div id="emptyState" class="empty-state hidden" role="status" aria-live="polite">
                    <div class="empty-icon" aria-hidden="true">üì≠</div>
                    <p class="empty-text">–ö–æ–Ω—Ç–µ–Ω—Ç –ø–æ–∫–∞ –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–π–¥–∏—Ç–µ –ø–æ–∑–∂–µ.</p>
                </div>

                <section id="contentItems" class="content-items" aria-live="polite"></section>
            </main>
        </div>
    </div>

    <div id="imageModal" class="modal" role="dialog" aria-modal="true" aria-label="–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
        <div class="modal-content">
            <button id="modalCloseButton" class="modal-close" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
            <img id="modalImage" class="modal-image" src="" alt="–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
        </div>
    </div>

    <script id="webapp-config" type="application/json">{{ config | tojson }}</script>
    <script type="module" src="{{ request.app.url_path_for('webapp_static', path='js/app.js') }}?v={{ version }}" defer></script>
</body>
</html>
